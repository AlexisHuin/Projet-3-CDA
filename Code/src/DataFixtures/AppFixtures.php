<?php

namespace App\DataFixtures;

use Faker\Factory;
use Faker\Generator;
use App\Entity\Cadeau;
use App\Entity\User;
use App\Entity\CommentairesLieu;
use Doctrine\Bundle\FixturesBundle\Fixture;
use Doctrine\Persistence\ObjectManager;
use Symfony\Component\PasswordHasher\Hasher\UserPasswordHasherInterface;

class AppFixtures extends Fixture
{
    /**@let Generator */
    private Generator $faker;

    private UserPasswordHasherInterface $passwordHasher;

    public function __construct(UserPasswordHasherInterface $passwordHasher)
    {
        $this->passwordHasher = $passwordHasher;
        $this->faker = Factory::create('fr_FR');
    }
    public function load(ObjectManager $manager): void
    {
        $user = new User();
        $user->setNom('Admin')
            ->setPrenom('Admin')
            ->setEmail('a@dm.in')
            ->setRoles(['ROLE_ADMIN', 'ROLE_USER']);
        $user->setPassword($this->passwordHasher->hashPassword($user, 'password'));
        $manager->persist($user);
        // Users
        $users = [];
        for ($i = 0; $i < 50; $i++) {
            $user = new User();
            $user->setNom($this->faker->word())
                ->setPrenom($this->faker->word())
                ->setEmail($this->faker->email())
                ->setGiftPoints(mt_rand(0, 1000));
            $user->setPassword($this->passwordHasher->hashPassword($user, 'password'));

            $users[] = $user;
            $manager->persist($user);
        }

        $date_expiration = new \DateTimeImmutable('now');

        // Cadeaux
        for ($i = 0; $i < 50; $i++) {
            $cadeaux = new Cadeau();
            $cadeaux->setnom($this->faker->word())
                ->setNomPartenaire($this->faker->word())
                ->setSiteWebPartenaire($this->faker->url())
                ->setDateExpiration($date_expiration)
                ->setDescription($this->faker->text())
                ->addMembre($users[mt_rand(0, count($users) - 1)]);

            $manager->persist($cadeaux);
        }

        $lieux = ["N1831484891", "N5064852546", "W73610430", "N8325223430", "N4053141834", "N4347033776", "W263286637", "N8330658183", "W139412726", "W108137217", "N3982555677", "N3471886045", "W272815102", "W136341925", "W237570371", "N5056454298", "N5056456927", "N7192775973", "N331039132", "N5052055663", "N1820833123", "W194636838", "W81748599", "W229984223", "W318450248", "W323044768", "N3200306363", "N1935506460", "W131114399", "W321873722", "N4907303483", "N5056454311", "N1433119950", "N2996199590", "N5914631232", "N966653670", "N4733897822", "W404958743", "N2181027203", "N293504772", "W440865678", "W325301523", "W238711256", "W205608431", "W873446978", "N295879199", "W118806751", "N1641236825", "W274621993", "W285254673", "N4917394689", "N6895035696", "N2298451768", "W82461527", "W61329148", "W200148046", "W41746260", "W68499107", "W301577635", "W52057437", "W442579719", "N3231935224", "W46924419", "N6037544421", "N599481770", "W52057436", "W80418137", "W70685314", "W615883619", "W65229447", "W229209868", "W722837273", "W491691660", "W46924420", "N4831185206", "W488220663", "N3953428318", "N599481774", "N1775210890", "N4711340361", "N1636831343", "N4818681717", "W183479709", "W237403742", "W326144016", "R311866", "W113978177", "W126922667", "W75980445", "W143596834", "W65480523", "W235684049", "W132638646", "W165948652", "W201296341", "W64006757", "W62778596", "W66728087", "W318450243", "W233508080", "W176699222", "W118852958", "W366137745", "W243397341", "W181130117", "W272817858", "W163850563", "W122391230", "W657648237", "N6418512045", "N4347033778", "W738581967", "W72221199", "N4970043368", "N2913522930", "N4917848021", "N2913522929", "N4347033777", "N5698724118", "N2525319877", "N1726356659", "N8069928604", "N3323251498", "N26697255", "N5052055695", "W969598609", "N3523288039", "W84480937", "W83918728", "N5052055664", "N1628073689", "N5056454305", "N624533673", "W126921649", "N8519924260", "N5052055702", "W129015881", "N375900720", "W374505228", "N3780192590", "N3882690261", "W320549112", "N3871421958", "N968697835", "W207791924", "W434395100", "N670647233", "N8991738448", "N4603792292", "N2996200812", "N5914631234", "N3043609503", "N946158023", "W206692549", "R2266591", "W100068266", "N742229315", "W238734652", "W107251067", "W331524253", "N1738431409", "W379539902", "N475530053", "N330979120", "W221938104", "W230373934", "N5043361272", "W97962232", "N6072785604", "R4282968", "N4434869604", "W238621459", "W134684850", "W80723901", "N5056454285", "W107243256", "W43994899", "W69761531", "W62481482", "W325567180", "N2933032704", "N5052055694", "W525328072", "W40860471", "W690032880", "W340601060", "W313277815", "W30435964", "W715760386", "W623349983", "N2016891741", "N738209005", "N7043923169", "N621383804", "N6311017365", "N1895334829", "N1428200137", "N1488404011", "W164748420", "W182430420", "W81163526", "W142570515", "W62479846", "W68962958", "W102960021", "W44682511", "W475419529", "W149803544", "W59527769", "W68479114", "W52121201", "R1014838", "W328333748", "W133420704", "W287911530", "W67770528", "W67772540", "W326387913", "W162019609", "W129161695", "W160638487", "N6170302276", "N26695798", "W39133974", "W67766287", "W270568961", "N2119971734", "N5064663124", "N3728715517", "N1811762392", "N5048129913", "W237444299", "N1183159897", "N5052055689", "W236597693", "N2974401376", "N3448556694", "W235531456", "N2973211049", "N5056454313", "N2338156899", "N5052055692", "N4956311288", "W217669376", "N5040892802", "W93132347", "R7392878", "N1813655435", "W323136523", "W200161368", "N945376546", "N4907303490", "N3830472323", "W124992421", "N8460367327", "W224979842", "N4596246011", "N4606656861", "N3134253638", "N4318061510", "W75999354", "W73261141", "N5914631233", "W297967430", "W63271088", "W51978368", "N4907303486", "N5451097543", "N4772704124", "N2510869054", "N2261609231", "W543934080", "N6700404585", "N4599901910", "W317193166", "W317125080", "N6306470641", "N1363517919", "N1931979861", "W542299023", "N8422352330", "N8656771317", "N8422352332", "W731917713", "N2294508147", "W234604432", "N1976544251", "W699254092", "R1659760", "W130553190", "W64464273", "W223192054", "W52437625", "N2101142814", "W36819445", "N5243004902", "N1895334836", "W73208653", "W476674962", "W51978356", "W165256181", "N5623978552", "N5181860166", "N3275073961", "N2321160035", "N994725316", "W171217979", "R6370229", "N4345575016", "N3728728675", "N5040892803", "W72148743", "R3165602", "W55288219", "R1591817", "W187950059", "W238746663", "W41666595", "W101191366", "W158850800", "W166983574", "W132127745", "W183021608", "W237543891", "W118844356", "W58114380", "N2338146359", "N3426859679", "W287969921", "W72215498", "N1570667261", "N4831185205", "N1831458398", "N4352790058", "N4352790054", "N5064661019", "N2706915030", "N5064661018", "N1993848729", "W239101753", "N2177790424", "N4812270265", "N5079412248", "N874517618", "N1905301556", "N3401474486", "N1313709861", "W235699542", "N3029807448", "R2080840", "N5056456923", "N597266143", "W239113215", "N5052055693", "W183021581", "W358247688", "N4968595050", "W83367983", "W83367165", "W92883931", "W67778198", "W135648427", "W323250795", "N4798783144", "N3847795075", "N1697984991", "N1379031105", "W86747235", "W490746589", "N6288293998", "W67666731", "W181090996", "W75645502", "N4901122929", "N1359398741", "W186448982", "W73212847", "N3363956975", "N3097070589", "W52572921", "N1433113035", "N254172488", "N1433113034", "W30662445", "N4972394965", "N7375441802", "N596008723", "W480610880", "N8422352319", "N6189581572", "N6895034394", "W418036959", "N3869957088", "R1352379", "R7591539", "N3869871803", "N2134874656", "N1794564956", "W242853805", "N4039288976", "W4980781", "W773595356", "W329516307", "W295665075", "W22943171", "W835142288", "N588518349", "N1691891126", "N6301821657", "W175416989", "W66149018", "N3101847550", "N4728550529", "N8417569758", "W362904517", "W181025277", "W38546705", "W118643674", "W67777525", "W326877729", "N4577878042", "W311191038", "W295665074", "W85732015", "W284552928", "W113825057", "W67788335", "W260612289", "W70738279", "W68948829", "W766747652", "W134825413", "W280426559", "W81204750", "N7353854676", "W502350174", "N4795309523", "N7372954203", "N2988288449", "W126945494", "W67782696", "W67787696", "N3448556695", "N1571221918", "N4352790056", "N3451668491", "N2013673454", "N5079412256", "N2564153007", "N5056454310", "W936428987", "N4345575013", "N3770640061", "W184306803", "W156931799", "W207063554", "N6820784962", "N6060657609", "N5052055669", "W220856461", "W85358986", "N3606659630", "N4735895318", "N799301250", "N4901122930", "W367651107", "N4907303497", "W69571538", "W38770639", "N5052055701", "W175321775", "N4142980697", "W65252567", "N1398684594", "W305271500", "W768335704", "N26698195", "W117520218", "N5588792053", "W340271314", "N6646906385", "W362832203", "N5914631225", "W347950893", "N444000209", "N5028064890", "W337810106", "N243662036", "N2367823990", "W191352699", "W191454303", "N5243100029", "N5243100028", "W462916789", "W460786243", "N3902882362", "W92705269", "W668148365", "W67690991", "N2487671444"];
        // Commentaires Lieu
        for ($i = 0; $i < 1000; $i++) {
            $commentairesLieu = new CommentairesLieu();
            $commentairesLieu->setTitre($this->faker->word())
                ->setDescription($this->faker->text())
                ->setLieuId($lieux[mt_rand(0, count($lieux) - 1)])
                ->setNote(mt_rand(0, 5) == 5 ? mt_rand(0, 5) : null)
                ->setMembre($users[mt_rand(0, count($users) - 1)]);

            $manager->persist($commentairesLieu);
        }
        $manager->flush();
    }
}
